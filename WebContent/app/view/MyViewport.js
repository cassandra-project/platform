/*
 * File: app/view/MyViewport.js
 *
 * This file was generated by Sencha Architect version 2.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('C.view.MyViewport', {
	extend: 'Ext.container.Viewport',

	layout: {
		type: 'border'
	},

	initComponent: function() {
		var me = this;

		Ext.applyIf(me, {
			items: [
				{
					xtype: 'toolbar',
					region: 'north',
					height: 77,
					id: 'top_toolbar',
					items: [
						{
							xtype: 'image',
							margins: '0 0 0 10px',
							height: 73,
							width: 130,
							src: 'resources/icons/logo.png'
						},
						{
							xtype: 'tbtext',
							height: 23,
							id: 'logo-text',
							text: 'platform'
						}
					]
				},
				{
					xtype: 'panel',
					region: 'west',
					id: 'west_panel',
					minWidth: 350,
					width: 150,
					layout: {
						type: 'fit'
					},
					collapsible: true,
					title: 'My Projects'
				},
				{
					xtype: 'panel',
					region: 'center',
					id: 'center_panel',
					collapsible: false,
					title: 'Main Panel'
				},
				{
					xtype: 'panel',
					region: 'east',
					id: 'east_panel',
					minWidth: 200,
					width: 150,
					layout: {
						type: 'fit'
					},
					collapsible: true,
					title: 'Libraries'
				},
				{
					xtype: 'toolbar',
					region: 'south',
					height: 16,
					id: 'bottom_toolbar'
				}
			],
			listeners: {
				afterrender: {
					fn: me.onViewportAfterRender,
					scope: me
				}
			}
		});

		me.callParent(arguments);
	},

	onViewportAfterRender: function(abstractcomponent, options) {
		if (C.dbname) {
			var treePanel = new C.view.MyTreePanel({id: 'uiNavigationTreePanel'});
			var tabPanel =  new C.view.MyTabPanel({id: 'MainTabPanel'});

			treePanel.doLayout();
			abstractcomponent.getComponent('west_panel').add(treePanel);

			tabPanel.doLayout();
			abstractcomponent.getComponent('center_panel').layout = 'fit';
			abstractcomponent.getComponent('center_panel').add(tabPanel);
		}
		else {
			var loginForm = new C.view.LoginForm({id: 'LoginForm'});
			abstractcomponent.getComponent('center_panel').add(loginForm);
		}
	}

});